<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    <title>购物车</title>
    <link rel="stylesheet" type="text/css" href="../css/gouwuchereset.css"/>
    <link rel="stylesheet" type="text/css" href="../css/gouwucheindex.css"/>
</head>
    <body>
        <!--主题-->
        <div class="no">
            <p>暂无数据，快去逛逛吧！</p>
        </div>
        <div class="con">
            <div class="content">
                <div class="list">
                    <div class="fl">
                        <label>
                            <input type="checkbox" checked=""/>
                            <img src="../image/c_checkbox_on.png"/>
                        </label>
                    </div>
                    <p>手机模型</p>
                </div>
                <ul id="contentList" ind="0">
                    <script type="text/template" id="moban">
                        <li class="clearfix">
                            <div class="label fl">
                                <label>
                                    <input type="checkbox" checked=""/>
                                    <img src="../image/c_checkbox_on.png"/>
                                </label>
                            </div>
                            <div class="img fl">
                                <img style="width:80px; height: 80px" src={{=img}} />
                            </div>
                            <div class="text fl">
                                <p class="overflow">{{=diyname}}</p>
                                <p class="clearfix">
                                    <span class="lzp fl red">￥{{=danjia}}</span>
                                        <span class="fr">
                                            <input type="button" value="-" class="btn1" />
                                            <span class="number">1</span>
                                            <input type="button" value="+"  class="btn2"/>
                                        </span>
                                </p>
                            </div>
                        </li>
                        <br>
                    </script>
                </ul>
            </div>
            <p class="total">一共<number></number>件商品：<span></span></p>
        </div>
        <!--主题-->
        <!--结算-->
        <div class="bottom fixed">
            <div class="fl bottom-label">
                <label>
                    <input type="checkbox" checked=""/>
                    <img src="../image/c_checkbox_on.png" class="fl" />
                    全选
                </label>
            </div>
            <div class="fr">
                需要支付：<span></span>
                <button class="sett">结算</button>
            </div>
        </div>
        <!--结算-->
        <!--删除-->
        <div class="bottom fixed" style="display: none;">
            <div class="fr">
                <button class="delete">删除</button>
            </div>
        </div>
        <!--删除-->
        <!--弹框-->
        <div class="text1 fixed">
            <form>
                <input type="number"/>
                <input type="button"  value="确定"/>
            </form>
        </div>
        <!--弹框-->
        <!--弹框2-->
        <div class="alert fixed"></div>
        <!--弹框2-->
        <script src="../script/api.js" type="text/javascript"></script>
        <script src="../js/web.js"></script>
        <script src="../js/zepto.js"></script>
        <script src="../js/index.js"></script>
        <script src="../script/underscore.js"></script>
        <script>
            apiready = function() {
                api.parseTapmode();
                api.setRefreshHeaderInfo({
                    visible: true,
                    loadingImg: 'widget://image/coupon_bg_yellow.png',
                    bgColor: '#ccc',
                    textColor: '#fff',
                    textDown: '下拉刷新...',
                    textUp: '松开刷新...',
                    showTime: true
                }, function(ret, err) {
                    var compiled = _.template($("#moban").html());
                    $.get("http://123.206.98.49:3001/getgouwuche", function(result) {
                        if (result == "-1") {
                            alert("出错了");
                            return;
                        }
                        $api.html($api.byId('contentList'),"" );
                        if (result.length > 1) {
                            for (var i = 1; i < result.length; i++) {
                                var htmlstring = compiled(result[i]);
                                $("#contentList").append($(htmlstring));
                            }
                        }
                    });
                    api.refreshHeaderLoadDone();
                });
            };
        </script>
    </body>
</html>
